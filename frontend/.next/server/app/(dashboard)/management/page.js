(()=>{var e={};e.id=486,e.ids=[486],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},4643:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c}),s(1856),s(6989),s(5866),s(6694);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["(dashboard)",{children:["management",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1856)),"/workspace/frontend/src/app/(dashboard)/management/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6989)),"/workspace/frontend/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6694)),"/workspace/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspace/frontend/src/app/(dashboard)/management/page.tsx"],x="/(dashboard)/management/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/management/page",pathname:"/management",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9874:(e,t,s)=>{Promise.resolve().then(s.bind(s,1145))},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9669:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7506:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1405:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},1145:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(326),r=s(7577),i=s(6226),n=s(4690),l=s(1471),d=s(5329),c=s(165),o=s(4061),x=s(2881);let h=(0,x.Z)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var m=s(7358),u=s(949),p=s(1405);let b=(0,x.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),w=(0,x.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var g=s(7506),f=s(361),y=s(9669);function j(){let{user:e}=(0,n.a)(),{users:t,channels:s,loading:x,error:j,refresh:v}=function(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[d,c]=(0,r.useState)(null);return{users:e,channels:s,loading:i,error:d,refresh:async()=>{try{n(!0),c(null);let[e,s]=await Promise.all([l.bM.getUsers(),l.bM.getTrackedChannels()]);t(e.data),a(s.data)}catch(e){c(e.response?.data?.error||"Failed to load management data")}finally{n(!1)}}}}(),N=!!(e?.rank&&e.rank>=16&&e.rank<=255),[k,_]=(0,r.useState)("users"),[Z,M]=(0,r.useState)(""),[C,q]=(0,r.useState)(""),[S,I]=(0,r.useState)(null),[P,A]=(0,r.useState)([]),[L,D]=(0,r.useState)(!1),[$,z]=(0,r.useState)([]),[E,O]=(0,r.useState)(!1),[T,R]=(0,r.useState)(!1),[U,G]=(0,r.useState)(null),[V,H]=(0,r.useState)(""),[B,F]=(0,r.useState)("warning"),W=(0,r.useMemo)(()=>t.filter(e=>null!==e.rank),[t]),X=async()=>{try{D(!0);let e=await l.bM.getLOARequests();A(e.data)}catch(e){console.error("Error fetching LOA requests:",e)}finally{D(!1)}},Y=async()=>{try{O(!0);let e=await l.bM.getAllInfractions();z(e.data)}catch(e){console.error("Error fetching infractions:",e)}finally{O(!1)}};if(!N)return a.jsx("div",{className:"p-4 animate-fadeIn",children:(0,a.jsxs)(d.Z,{className:"p-8 text-center",children:[a.jsx(c.Z,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-white/60",children:"You do not have permission to view this page."})]})});let J=async(e,t)=>{I(`status:${e.id}`);try{await l.bM.updateUserStatus(e.id,t),await v()}finally{I(null)}},K=async()=>{I("addChannel");try{await l.bM.addTrackedChannel(Z.trim(),C.trim()),M(""),q(""),await v()}finally{I(null)}},Q=async e=>{I(`rmChannel:${e}`);try{await l.bM.removeTrackedChannel(e),await v()}finally{I(null)}},ee=async(e,t)=>{I(`loa:${e}`);try{await l.bM.reviewLOA(e,t),await X()}finally{I(null)}},et=async()=>{if(U&&V.trim()){I("issueInfraction");try{await l.bM.issueInfraction(U,V,B),R(!1),G(null),H(""),F("warning"),await Y()}finally{I(null)}}},es=async e=>{I(`void:${e}`);try{await l.bM.voidInfraction(e),await Y()}finally{I(null)}},ea=e=>{switch(e){case"pending":return a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-500/30 text-yellow-300",children:"Pending"});case"approved":return a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-green-500/30 text-green-300",children:"Approved"});case"denied":return a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-red-500/30 text-red-300",children:"Denied"});default:return null}},er=[{key:"users",label:"Staff Users",icon:o.Z},{key:"channels",label:"Tracked Channels",icon:h},{key:"loa",label:"LOA Requests",icon:m.Z},{key:"infractions",label:"Infractions",icon:u.Z}];return(0,a.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[a.jsx(d.Z,{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-500/20 flex items-center justify-center",children:a.jsx(c.Z,{className:"w-5 h-5 text-red-400"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-white",children:"Management Panel"}),a.jsx("p",{className:"text-xs text-white/50",children:"Administrator controls for Atlanta High"})]})]}),a.jsx("button",{onClick:()=>{v(),"loa"===k&&X(),"infractions"===k&&Y()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition",children:a.jsx(p.Z,{className:"w-5 h-5 text-white/70"})})]})}),a.jsx(d.Z,{className:"p-4",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:er.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>_(e.key),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all ${k===e.key?"bg-white text-black shadow-lg scale-105":"text-white/60 hover:bg-white/10 hover:text-white"}`,children:[a.jsx(t,{className:"w-4 h-4"}),e.label]},e.key)})})}),x&&a.jsx("div",{className:"text-center text-white/50 py-8",children:"Loading..."}),j&&a.jsx("div",{className:"text-center text-red-400 py-8",children:j}),"users"===k&&(0,a.jsxs)(d.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(o.Z,{className:"w-5 h-5 text-white/70"}),"Staff Users (",W.length,")"]}),a.jsx("div",{className:"space-y-3",children:W.map(e=>{let t=e.roblox_id?`https://www.roblox.com/headshot-thumbnail/image?userId=${e.roblox_id}&width=150&height=150&format=png`:"https://cdn.discordapp.com/embed/avatars/0.png";return(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 hover:bg-white/10 transition",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(i.default,{src:t,alt:e.roblox_username||e.discord_username,width:40,height:40,className:"w-10 h-10 rounded-full",unoptimized:!0}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white font-medium",children:e.roblox_username||e.discord_username}),(0,a.jsxs)("div",{className:"text-xs text-white/50",children:[e.rank_name||`Rank ${e.rank}`," â€¢ ID: ",e.id]})]}),a.jsx("button",{onClick:()=>{G(e.id),R(!0)},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition",children:"Issue Infraction"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["active","inactive","pending_verification"].map(t=>a.jsx("button",{onClick:()=>J(e,t),disabled:null!==S,className:`px-3 py-1 rounded-lg text-xs font-medium transition ${e.status===t?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"} disabled:opacity-50`,children:t.replace("_"," ")},t))})]},e.id)})})]}),"channels"===k&&(0,a.jsxs)(d.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5 text-white/70"}),"Tracked Channels (",s.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[a.jsx("input",{value:Z,onChange:e=>M(e.target.value),placeholder:"Channel ID",className:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-blue-500/50"}),a.jsx("input",{value:C,onChange:e=>q(e.target.value),placeholder:"Channel Name",className:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-blue-500/50"}),(0,a.jsxs)("button",{onClick:K,disabled:!Z.trim()||!C.trim()||null!==S,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium disabled:opacity-50 transition flex items-center gap-2",children:[a.jsx(b,{className:"w-4 h-4"}),"Add"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[0===s.length&&a.jsx("div",{className:"text-white/50 text-sm text-center py-4",children:"No tracked channels"}),s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-white font-medium text-sm",children:e.channel_name}),a.jsx("div",{className:"text-xs text-white/40",children:e.discord_channel_id})]}),a.jsx("button",{onClick:()=>Q(e.id),disabled:null!==S,className:"p-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-300 disabled:opacity-50 transition",children:a.jsx(w,{className:"w-4 h-4"})})]},e.id))]})]}),"loa"===k&&(0,a.jsxs)(d.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5 text-white/70"}),"LOA Requests"]}),L?(0,a.jsxs)("div",{className:"text-center py-8 text-white/50",children:[a.jsx(g.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):0===P.length?a.jsx("div",{className:"text-center py-8 text-white/50",children:"No LOA requests"}):a.jsx("div",{className:"space-y-3",children:P.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[a.jsx("span",{className:"text-white font-medium",children:e.user_roblox_username||e.user_discord_username}),ea(e.status)]}),a.jsx("span",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("p",{className:"text-sm text-white/60 mb-2",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]}),a.jsx("p",{className:"text-xs text-white/50 mb-3",children:e.reason}),"pending"===e.status&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>ee(e.id,"approved"),disabled:null!==S,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-green-500/20 text-green-300 hover:bg-green-500/30 transition text-sm disabled:opacity-50",children:[a.jsx(f.Z,{className:"w-4 h-4"}),"Approve"]}),(0,a.jsxs)("button",{onClick:()=>ee(e.id,"denied"),disabled:null!==S,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition text-sm disabled:opacity-50",children:[a.jsx(y.Z,{className:"w-4 h-4"}),"Deny"]})]})]},e.id))})]}),"infractions"===k&&(0,a.jsxs)(d.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(u.Z,{className:"w-5 h-5 text-yellow-400"}),"All Infractions"]}),E?(0,a.jsxs)("div",{className:"text-center py-8 text-white/50",children:[a.jsx(g.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):0===$.length?a.jsx("div",{className:"text-center py-8 text-white/50",children:"No infractions"}):a.jsx("div",{className:"space-y-3",children:$.map(e=>(0,a.jsxs)("div",{className:`p-4 rounded-xl ${e.voided?"bg-white/5 opacity-60":"strike"===e.type?"bg-red-500/10 border border-red-500/20":"bg-yellow-500/10 border border-yellow-500/20"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white font-medium",children:e.user_roblox_username||e.user_discord_username}),a.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${e.voided?"bg-white/10 text-white/50":"strike"===e.type?"bg-red-500/30 text-red-300":"bg-yellow-500/30 text-yellow-300"}`,children:e.voided?"Voided":e.type})]}),a.jsx("span",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleDateString()})]}),a.jsx("p",{className:"text-sm text-white/60 mb-1",children:e.reason}),(0,a.jsxs)("p",{className:"text-xs text-white/40 mb-2",children:["By ",e.issued_by_username||"System"]}),!e.voided&&a.jsx("button",{onClick:()=>es(e.id),disabled:null!==S,className:"px-3 py-1.5 rounded-lg bg-white/10 text-white/70 hover:bg-white/20 transition text-xs disabled:opacity-50",children:"Void Infraction"})]},e.id))})]}),T&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-zinc-900 rounded-2xl border border-white/10 p-6 animate-scaleIn",children:[a.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Issue Infraction"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"User"}),(0,a.jsxs)("select",{value:U||"",onChange:e=>G(Number(e.target.value)),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-blue-500/50",children:[a.jsx("option",{value:"",children:"Select a user"}),W.map(e=>a.jsx("option",{value:e.id,children:e.roblox_username||e.discord_username},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Type"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>F("warning"),className:`flex-1 px-4 py-2 rounded-xl transition ${"warning"===B?"bg-yellow-500/30 text-yellow-300 border border-yellow-500/50":"bg-white/5 text-white/60 border border-white/10"}`,children:"Warning"}),a.jsx("button",{onClick:()=>F("strike"),className:`flex-1 px-4 py-2 rounded-xl transition ${"strike"===B?"bg-red-500/30 text-red-300 border border-red-500/50":"bg-white/5 text-white/60 border border-white/10"}`,children:"Strike"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Reason"}),a.jsx("textarea",{value:V,onChange:e=>H(e.target.value),rows:3,placeholder:"Enter the reason for this infraction...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 resize-none"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{R(!1),G(null),H("")},className:"flex-1 px-4 py-3 rounded-xl bg-white/5 text-white font-medium hover:bg-white/10 transition",children:"Cancel"}),a.jsx("button",{onClick:et,disabled:!U||!V.trim()||null!==S,className:"flex-1 px-4 py-3 rounded-xl bg-red-500/20 text-red-300 font-medium hover:bg-red-500/30 transition disabled:opacity-50",children:"Issue Infraction"})]})]})]})})]})}},1856:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/workspace/frontend/src/app/(dashboard)/management/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[306,262,89],()=>s(4643));module.exports=a})();