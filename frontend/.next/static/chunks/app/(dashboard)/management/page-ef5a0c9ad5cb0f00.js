(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{4788:function(e,t,s){Promise.resolve().then(s.bind(s,9544))},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9544:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(7437),n=s(2265),r=s(1245),i=s(8223),l=s(9848),c=s(757),o=s(3180),d=s(1817),u=s(8906),h=s(5805),x=s(9205);let m=(0,x.Z)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var p=s(1047),f=s(6865),g=s(2431);let b=(0,x.Z)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var y=s(1671),w=s(9388),v=s(1723);let j=(0,x.Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),N=(0,x.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function k(e){return null!=e&&e>=254&&e<=255}function S(){let{user:e}=(0,r.a)(),{users:t,channels:s,loading:x,error:S,refresh:_}=function(){let[e,t]=(0,n.useState)([]),[s,a]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[c,o]=(0,n.useState)(null),d=async()=>{try{l(!0),o(null);let[e,s]=await Promise.all([i.bM.getUsers(),i.bM.getTrackedChannels()]);t(e.data),a(s.data)}catch(t){var e,s;o((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to load management data")}finally{l(!1)}};return(0,n.useEffect)(()=>{d()},[]),{users:e,channels:s,loading:r,error:c,refresh:d}}(),{permissions:Z,loading:M}=(0,l.T)(),I=(0,n.useMemo)(()=>Z.includes("MANAGE_USERS")||Z.includes("MANAGE_PERMISSIONS"),[Z]),[C,A]=(0,n.useState)("users"),[L,E]=(0,n.useState)(""),[U,P]=(0,n.useState)(""),[T,q]=(0,n.useState)(null),[D,R]=(0,n.useState)([]),[z,O]=(0,n.useState)(!1),[G,F]=(0,n.useState)([]),[H,B]=(0,n.useState)(!1),[V,K]=(0,n.useState)(!1),[W,Y]=(0,n.useState)(null),[X,$]=(0,n.useState)(""),[J,Q]=(0,n.useState)("warning"),[ee,et]=(0,n.useState)(null),[es,ea]=(0,n.useState)(!1),[en,er]=(0,n.useState)(null),ei=(0,n.useMemo)(()=>t.filter(e=>null!==e.rank),[t]);(0,n.useEffect)(()=>{"loa"===C?eo():"infractions"===C?ed():"users"===C&&el()},[C]);let el=async()=>{try{let e=await i.bM.getGroupSyncStatus();et(e.data)}catch(e){console.error("Error fetching sync status:",e)}},ec=async()=>{if(!es&&(null==ee||!ee.isSyncing)){ea(!0),er(null);try{let e=(await i.bM.triggerGroupSync()).data.result;e.success?er({type:"success",message:"Sync complete! Updated ".concat(e.updatedUsers," of ").concat(e.totalUsers," users.")}):er({type:"error",message:"Sync completed with ".concat(e.failedUsers," errors. Updated ").concat(e.updatedUsers," users.")}),await Promise.all([_(),el()])}catch(s){var e,t;er({type:"error",message:(null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||"Failed to trigger sync"})}finally{ea(!1),setTimeout(()=>er(null),5e3)}}},eo=async()=>{try{O(!0);let e=await i.bM.getLOARequests();R(e.data)}catch(e){console.error("Error fetching LOA requests:",e)}finally{O(!1)}},ed=async()=>{try{B(!0);let e=await i.bM.getAllInfractions();F(e.data)}catch(e){console.error("Error fetching infractions:",e)}finally{B(!1)}};if(M)return(0,a.jsx)("div",{className:"p-4 animate-fadeIn",children:(0,a.jsxs)(c.Z,{className:"p-8 text-center",children:[(0,a.jsx)(d.Z,{className:"w-8 h-8 animate-spin text-white/50 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white/60",children:"Loading..."})]})});if(!I)return(0,a.jsx)("div",{className:"p-4 animate-fadeIn",children:(0,a.jsxs)(c.Z,{className:"p-8 text-center",children:[(0,a.jsx)(u.Z,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-white/60",children:"You do not have permission to view this page."})]})});let eu=async(e,t)=>{q("status:".concat(e.id));try{await i.bM.updateUserStatus(e.id,t),await _()}finally{q(null)}},eh=async()=>{q("addChannel");try{await i.bM.addTrackedChannel(L.trim(),U.trim()),E(""),P(""),await _()}finally{q(null)}},ex=async e=>{q("rmChannel:".concat(e));try{await i.bM.removeTrackedChannel(e),await _()}finally{q(null)}},em=async(e,t)=>{q("loa:".concat(e));try{await i.bM.reviewLOA(e,t),await eo()}finally{q(null)}},ep=async()=>{if(W&&X.trim()){q("issueInfraction");try{await i.bM.issueInfraction(W,X,J),K(!1),Y(null),$(""),Q("warning"),await ed()}finally{q(null)}}},ef=async e=>{q("void:".concat(e));try{await i.bM.voidInfraction(e),await ed()}finally{q(null)}},eg=e=>{switch(e){case"pending":return(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-500/30 text-yellow-300",children:"Pending"});case"approved":return(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-green-500/30 text-green-300",children:"Approved"});case"denied":return(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-red-500/30 text-red-300",children:"Denied"});default:return null}},eb=[{key:"users",label:"Staff Users",icon:h.Z},{key:"channels",label:"Tracked Channels",icon:m},{key:"loa",label:"LOA Requests",icon:p.Z},{key:"infractions",label:"Infractions",icon:f.Z}];return(0,a.jsxs)("div",{className:"space-y-4 animate-fadeIn",children:[(0,a.jsx)(c.Z,{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-red-500/20 flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-5 h-5 text-red-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-white",children:"Management Panel"}),(0,a.jsx)("p",{className:"text-xs text-white/50",children:"Administrator controls for Atlanta High"})]})]}),(0,a.jsx)("button",{onClick:()=>{_(),"loa"===C&&eo(),"infractions"===C&&ed()},className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-white/70"})})]})}),(0,a.jsx)(c.Z,{className:"p-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:eb.map(e=>{let t=e.icon;return(0,a.jsxs)("button",{onClick:()=>A(e.key),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all ".concat(C===e.key?"bg-white text-black shadow-lg scale-105":"text-white/60 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)(t,{className:"w-4 h-4"}),e.label]},e.key)})})}),x&&(0,a.jsx)("div",{className:"text-center text-white/50 py-8",children:"Loading..."}),S&&(0,a.jsx)("div",{className:"text-center text-red-400 py-8",children:S}),"users"===C&&(0,a.jsxs)(c.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-white/70"}),"Staff Users (",ei.length,")"]}),(0,a.jsx)("button",{onClick:ec,disabled:es||(null==ee?void 0:ee.isSyncing),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition",children:es||(null==ee?void 0:ee.isSyncing)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),"Syncing..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{className:"w-4 h-4"}),"Group Sync"]})})]}),en&&(0,a.jsxs)("div",{className:"mb-4 p-3 rounded-lg flex items-center gap-2 ".concat("success"===en.type?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"),children:["success"===en.type?(0,a.jsx)(y.Z,{className:"w-4 h-4"}):(0,a.jsx)(w.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:en.message})]}),(null==ee?void 0:ee.lastSyncTime)&&(0,a.jsxs)("div",{className:"mb-4 text-xs text-white/50 flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3"}),"Last sync: ",new Date(ee.lastSyncTime).toLocaleString(),ee.lastSyncResult&&(0,a.jsxs)("span",{className:"ml-2",children:["(",ee.lastSyncResult.updatedUsers," updated)"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:ei.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/5 hover:bg-white/10 transition",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)(o.f,{robloxId:e.roblox_id,discordId:e.discord_id,discordAvatar:e.discord_avatar,alt:e.roblox_username||e.discord_username,size:40,className:"w-10 h-10"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:e.roblox_username||e.discord_username}),(0,a.jsxs)("div",{className:"text-xs text-white/50",children:[e.rank_name||"Rank ".concat(e.rank)," â€¢ ID: ",e.id]})]}),!k(e.rank)&&(0,a.jsx)("button",{onClick:()=>{Y(e.id),K(!0)},className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition",children:"Issue Infraction"}),k(e.rank)&&(0,a.jsx)("span",{className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-yellow-500/20 text-yellow-300",children:"Immune"})]}),k(e.rank)?(0,a.jsx)("div",{className:"text-xs text-yellow-300/70",children:"This user has an immune rank and cannot have their status modified."}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["active","inactive","pending_verification"].map(t=>(0,a.jsx)("button",{onClick:()=>eu(e,t),disabled:null!==T,className:"px-3 py-1 rounded-lg text-xs font-medium transition ".concat(e.status===t?"bg-blue-500/30 text-blue-300 border border-blue-500/50":"bg-white/5 text-white/60 hover:bg-white/10 border border-white/10"," disabled:opacity-50"),children:t.replace("_"," ")},t))})]},e.id))})]}),"channels"===C&&(0,a.jsxs)(c.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(m,{className:"w-5 h-5 text-white/70"}),"Tracked Channels (",s.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("input",{value:L,onChange:e=>E(e.target.value),placeholder:"Channel ID",className:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-blue-500/50"}),(0,a.jsx)("input",{value:U,onChange:e=>P(e.target.value),placeholder:"Channel Name",className:"flex-1 px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm placeholder-white/30 focus:outline-none focus:border-blue-500/50"}),(0,a.jsxs)("button",{onClick:eh,disabled:!L.trim()||!U.trim()||null!==T,className:"px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium disabled:opacity-50 transition flex items-center gap-2",children:[(0,a.jsx)(j,{className:"w-4 h-4"}),"Add"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[0===s.length&&(0,a.jsx)("div",{className:"text-white/50 text-sm text-center py-4",children:"No tracked channels"}),s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-white font-medium text-sm",children:e.channel_name}),(0,a.jsx)("div",{className:"text-xs text-white/40",children:e.discord_channel_id})]}),(0,a.jsx)("button",{onClick:()=>ex(e.id),disabled:null!==T,className:"p-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-300 disabled:opacity-50 transition",children:(0,a.jsx)(N,{className:"w-4 h-4"})})]},e.id))]})]}),"loa"===C&&(0,a.jsxs)(c.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-white/70"}),"LOA Requests"]}),z?(0,a.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):0===D.length?(0,a.jsx)("div",{className:"text-center py-8 text-white/50",children:"No LOA requests"}):(0,a.jsx)("div",{className:"space-y-3",children:D.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-white font-medium",children:e.user_roblox_username||e.user_discord_username}),eg(e.status)]}),(0,a.jsx)("span",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsxs)("p",{className:"text-sm text-white/60 mb-2",children:[new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]}),(0,a.jsx)("p",{className:"text-xs text-white/50 mb-3",children:e.reason}),"pending"===e.status&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>em(e.id,"approved"),disabled:null!==T,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-green-500/20 text-green-300 hover:bg-green-500/30 transition text-sm disabled:opacity-50",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Approve"]}),(0,a.jsxs)("button",{onClick:()=>em(e.id,"denied"),disabled:null!==T,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-red-500/20 text-red-300 hover:bg-red-500/30 transition text-sm disabled:opacity-50",children:[(0,a.jsx)(w.Z,{className:"w-4 h-4"}),"Deny"]})]})]},e.id))})]}),"infractions"===C&&(0,a.jsxs)(c.Z,{className:"p-5 animate-fadeIn",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-5 h-5 text-yellow-400"}),"All Infractions"]}),H?(0,a.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,a.jsx)(d.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading..."]}):0===G.length?(0,a.jsx)("div",{className:"text-center py-8 text-white/50",children:"No infractions"}):(0,a.jsx)("div",{className:"space-y-3",children:G.map(e=>(0,a.jsxs)("div",{className:"p-4 rounded-xl ".concat(e.voided?"bg-white/5 opacity-60":"strike"===e.type?"bg-red-500/10 border border-red-500/20":"bg-yellow-500/10 border border-yellow-500/20"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-white font-medium",children:e.user_roblox_username||e.user_discord_username}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full ".concat(e.voided?"bg-white/10 text-white/50":"strike"===e.type?"bg-red-500/30 text-red-300":"bg-yellow-500/30 text-yellow-300"),children:e.voided?"Voided":e.type})]}),(0,a.jsx)("span",{className:"text-xs text-white/40",children:new Date(e.created_at).toLocaleDateString()})]}),(0,a.jsx)("p",{className:"text-sm text-white/60 mb-1",children:e.reason}),(0,a.jsxs)("p",{className:"text-xs text-white/40 mb-2",children:["By ",e.issued_by_username||"System"]}),!e.voided&&(0,a.jsx)("button",{onClick:()=>ef(e.id),disabled:null!==T,className:"px-3 py-1.5 rounded-lg bg-white/10 text-white/70 hover:bg-white/20 transition text-xs disabled:opacity-50",children:"Void Infraction"})]},e.id))})]}),V&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-zinc-900 rounded-2xl border border-white/10 p-6 animate-scaleIn",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Issue Infraction"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"User"}),(0,a.jsxs)("select",{value:W||"",onChange:e=>Y(Number(e.target.value)),className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white focus:outline-none focus:border-blue-500/50",children:[(0,a.jsx)("option",{value:"",children:"Select a user"}),ei.filter(e=>!k(e.rank)).map(e=>(0,a.jsx)("option",{value:e.id,children:e.roblox_username||e.discord_username},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Type"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:()=>Q("warning"),className:"flex-1 px-4 py-2 rounded-xl transition ".concat("warning"===J?"bg-yellow-500/30 text-yellow-300 border border-yellow-500/50":"bg-white/5 text-white/60 border border-white/10"),children:"Warning"}),(0,a.jsx)("button",{onClick:()=>Q("strike"),className:"flex-1 px-4 py-2 rounded-xl transition ".concat("strike"===J?"bg-red-500/30 text-red-300 border border-red-500/50":"bg-white/5 text-white/60 border border-white/10"),children:"Strike"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"Reason"}),(0,a.jsx)("textarea",{value:X,onChange:e=>$(e.target.value),rows:3,placeholder:"Enter the reason for this infraction...",className:"w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/30 focus:outline-none focus:border-blue-500/50 resize-none"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,a.jsx)("button",{onClick:()=>{K(!1),Y(null),$("")},className:"flex-1 px-4 py-3 rounded-xl bg-white/5 text-white font-medium hover:bg-white/10 transition",children:"Cancel"}),(0,a.jsx)("button",{onClick:ep,disabled:!W||!X.trim()||null!==T,className:"flex-1 px-4 py-3 rounded-xl bg-red-500/20 text-red-300 font-medium hover:bg-red-500/30 transition disabled:opacity-50",children:"Issue Infraction"})]})]})]})})]})}},3180:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});var a=s(7437),n=s(3145),r=s(2369),i=s(2269);function l(e){let{robloxId:t,discordId:s,discordAvatar:l,alt:c,size:o=40,className:d=""}=e,{avatarUrl:u,loading:h,error:x}=(0,i.k)(t),m=(0,i.g)(s,l),p=t&&u?u:m;return h&&t?(0,a.jsx)("div",{className:"rounded-full bg-white/10 flex items-center justify-center ".concat(d),style:{width:o,height:o},children:(0,a.jsx)(r.Z,{className:"w-1/2 h-1/2 text-white/40"})}):(0,a.jsx)(n.default,{src:p,alt:c,width:o,height:o,className:"rounded-full ".concat(d),unoptimized:!0})}},757:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(7437),n=s(4457);function r(e){let{className:t,children:s,style:r}=e;return(0,a.jsx)("div",{className:(0,n.cn)("rounded-[26px] border border-white/10 bg-gradient-to-b from-white/[0.06] to-white/[0.02] shadow-[0_0_0_1px_rgba(255,255,255,0.04),0_24px_70px_rgba(0,0,0,0.78)]",t),style:r,children:s})}},1245:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return l},a:function(){return c}});var a=s(7437),n=s(2265),r=s(8223);let i=(0,n.createContext)(void 0);function l(e){var t;let{children:s}=e,[l,c]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null),x=(0,n.useCallback)(()=>{localStorage.removeItem("token"),c(null),h(null)},[]),m=(0,n.useCallback)(e=>{localStorage.setItem("token",e)},[]),p=(0,n.useCallback)(async()=>{try{if(!localStorage.getItem("token"))return c(null),h(null),d(!1),null;let e=(await r.kv.getMe()).data;return c(e),e.verification?h(e.verification):h({discord:!!e.discord_id,roblox:!!e.roblox_id,active:"active"===e.status,rank:null!==e.rank,complete:"active"===e.status&&null!==e.roblox_id&&null!==e.rank,next_step:e.roblox_id?"active"!==e.status?"activation":null:"roblox"}),e}catch(s){var e,t;return console.error("Error fetching user:",s),((null===(e=s.response)||void 0===e?void 0:e.status)===401||(null===(t=s.response)||void 0===t?void 0:t.status)===403)&&x(),null}finally{d(!1)}},[x]);(0,n.useEffect)(()=>{p()},[p]);let f=null!==(t=null==u?void 0:u.complete)&&void 0!==t&&t;return(0,a.jsx)(i.Provider,{value:{user:l,loading:o,verification:u,isFullyVerified:f,refreshUser:p,updateToken:m,logout:x},children:s})}function c(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9848:function(e,t,s){"use strict";s.d(t,{T:function(){return r}});var a=s(2265),n=s(8223);function r(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await n.K5.getPermissions();t(e.data.permissions)}catch(e){console.error("Error fetching permissions:",e)}finally{r(!1)}})()},[]),{permissions:e,loading:s,hasPermission:t=>!s&&e.includes(t)}}},2269:function(e,t,s){"use strict";s.d(t,{g:function(){return i},k:function(){return r}});var a=s(2265);let n=new Map;function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"150x150",[s,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1),[c,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(!e){r(null);return}let s="".concat(e,":").concat(t);if(n.has(s)){r(n.get(s));return}let a=!1;return async function(){l(!0),o(null);try{let i=await fetch("https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=".concat(e,"&size=").concat(t,"&format=Png&isCircular=false"));if(!i.ok)throw Error("Failed to fetch avatar: ".concat(i.status));let l=await i.json();if(!a&&l.data&&l.data.length>0&&l.data[0].imageUrl){let e=l.data[0].imageUrl;n.set(s,e),r(e)}else a||r(null)}catch(e){a||(console.error("Error fetching Roblox avatar:",e),o(e instanceof Error?e:Error("Failed to fetch avatar")),r(null))}finally{a||l(!1)}}(),()=>{a=!0}},[e,t]),{avatarUrl:s,loading:i,error:c}}function i(e,t){if(t)return"https://cdn.discordapp.com/avatars/".concat(e,"/").concat(t,".png?size=128");let s=parseInt(e.slice(-1))%5;return"https://cdn.discordapp.com/embed/avatars/".concat(s,".png")}},4457:function(e,t,s){"use strict";function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}s.d(t,{cn:function(){return a}})},8223:function(e,t,s){"use strict";s.d(t,{K5:function(){return x},Mh:function(){return o},Yd:function(){return u},au:function(){return h},bM:function(){return m},bR:function(){return r},kv:function(){return c},vD:function(){return d}});var a=s(3464);let n=s(257).env.NEXT_PUBLIC_API_URL||"https://staffapp-9q1t.onrender.com/api";function r(){return n.replace(/\/$/,"")}let i=a.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e});let l=!1;i.interceptors.response.use(e=>e,e=>{var t;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!l){let e=window.location.pathname;"/login"===e||e.startsWith("/auth/")||"/"===e||(l=!0,localStorage.removeItem("token"),window.location.replace("/login"),setTimeout(()=>{l=!1},2e3))}return Promise.reject(e)});let c={getMe:()=>i.get("/auth/me"),logout:()=>i.post("/auth/logout")},o={requestCode:()=>i.post("/verification/roblox/request"),verify:(e,t)=>i.post("/verification/roblox/verify",{roblox_username:e,emoji_code:t}),getStatus:()=>i.get("/verification/roblox/status")},d={getStats:()=>i.get("/dashboard/stats"),getInfractions:()=>i.get("/dashboard/infractions"),getAnalytics:()=>i.get("/dashboard/analytics")},u={getStatus:()=>i.get("/dashboard/loa/status"),getRequests:()=>i.get("/dashboard/loa"),create:(e,t,s)=>i.post("/dashboard/loa",{start_date:e,end_date:t,reason:s}),cancel:e=>i.delete("/dashboard/loa/".concat(e))},h={list:e=>i.get("/tickets",{params:{status:e}}),claim:e=>i.post("/tickets/".concat(e,"/claim")),resolve:e=>i.post("/tickets/".concat(e,"/resolve"))},x={getPermissions:()=>i.get("/permissions"),checkPermission:e=>i.get("/permissions/check",{params:{permission:e}})},m={getUsers:()=>i.get("/management/users"),updateUserPermission:(e,t,s)=>i.put("/management/users/".concat(e,"/permissions"),{permission:t,granted:s}),updateUserStatus:(e,t)=>i.put("/management/users/".concat(e,"/status"),{status:t}),getTrackedChannels:()=>i.get("/management/tracked-channels"),addTrackedChannel:(e,t)=>i.post("/management/tracked-channels",{discord_channel_id:e,channel_name:t}),removeTrackedChannel:e=>i.delete("/management/tracked-channels/".concat(e)),getLOARequests:e=>i.get("/management/loa",{params:{status:e}}),reviewLOA:(e,t,s)=>i.put("/management/loa/".concat(e,"/review"),{status:t,review_notes:s}),getAllInfractions:()=>i.get("/management/infractions"),issueInfraction:(e,t,s)=>i.post("/management/infractions",{user_id:e,reason:t,type:s}),voidInfraction:e=>i.put("/management/infractions/".concat(e,"/void")),getUserInfractions:e=>i.get("/management/users/".concat(e,"/infractions")),getGroupSyncStatus:()=>i.get("/management/group-sync/status"),triggerGroupSync:()=>i.post("/management/group-sync")}}},function(e){e.O(0,[464,304,971,117,744],function(){return e(e.s=4788)}),_N_E=e.O()}]);