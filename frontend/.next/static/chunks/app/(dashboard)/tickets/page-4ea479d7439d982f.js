(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[258],{444:function(e,t,s){Promise.resolve().then(s.bind(s,1445))},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9388:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2431:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},2369:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1445:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),l=s(2265),i=s(1723),c=s(2369),n=s(1671),r=s(9388);let d=(0,s(9205).Z)("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);var o=s(2431),u=s(1817),h=s(3247),m=s(6560),x=s(4967),y=s(757),p=s(8223),f=s(1245);let v=[{key:"all",label:"All"},{key:"open",label:"Open"},{key:"claimed",label:"Claimed"},{key:"resolved",label:"Resolved"},{key:"closed",label:"Closed"}];function b(){let{user:e}=(0,f.a)(),[t,s]=(0,l.useState)("all"),{tickets:b,loading:w,error:k,refresh:j}=function(e){let[t,s]=(0,l.useState)([]),[a,i]=(0,l.useState)(!0),[c,n]=(0,l.useState)(null),r=async()=>{try{i(!0),n(null);let t=await p.au.list(e);s(t.data)}catch(e){var t,a;n((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.error)||"Failed to fetch tickets")}finally{i(!1)}};return(0,l.useEffect)(()=>{r()},[e]),{tickets:t,loading:a,error:c,refresh:r}}("all"===t?void 0:t),[g,N]=(0,l.useState)(null),Z=(0,l.useMemo)(()=>{let e={all:b.length,open:0,claimed:0,resolved:0,closed:0};for(let t of b)e[t.status]=(e[t.status]||0)+1;return e},[b]),M=e=>{switch(e){case"open":return(0,a.jsx)(i.Z,{className:"w-4 h-4 text-blue-300"});case"claimed":return(0,a.jsx)(c.Z,{className:"w-4 h-4 text-yellow-300"});case"resolved":return(0,a.jsx)(n.Z,{className:"w-4 h-4 text-green-300"});case"closed":return(0,a.jsx)(r.Z,{className:"w-4 h-4 text-gray-400"});default:return(0,a.jsx)(i.Z,{className:"w-4 h-4 text-white/50"})}},_=e=>{switch(e){case"open":return"bg-blue-500/20 text-blue-300 border-blue-500/30";case"claimed":return"bg-yellow-500/20 text-yellow-300 border-yellow-500/30";case"resolved":return"bg-green-500/20 text-green-300 border-green-500/30";default:return"bg-white/10 text-white/50 border-white/20"}},C=async e=>{N(e);try{await p.au.claim(e),await j()}catch(e){console.error("Error claiming ticket:",e)}finally{N(null)}},S=async e=>{N(e);try{await p.au.resolve(e),await j()}catch(e){console.error("Error resolving ticket:",e)}finally{N(null)}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(m.P,{}),(0,a.jsx)(x.k,{}),(0,a.jsxs)(y.Z,{className:"p-5 animate-fadeInUp",style:{animationDelay:"0.1s"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{className:"w-5 h-5 text-white/70"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-white",children:"Ticket Lookup"}),(0,a.jsx)("p",{className:"text-xs text-white/50",children:"Search and manage support tickets"})]})]}),(0,a.jsx)("button",{onClick:j,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all hover:scale-105 active:scale-95",children:(0,a.jsx)(o.Z,{className:"w-4 h-4 text-white/70 ".concat(w?"animate-spin":"")})})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:v.map((e,l)=>{var i;return(0,a.jsxs)("button",{onClick:()=>s(e.key),className:"px-3 py-1.5 text-xs font-medium rounded-full transition-all animate-slideUp ".concat(t===e.key?"bg-white text-black scale-105":"bg-white/10 text-white/60 hover:bg-white/20 hover:text-white hover:scale-105"),style:{animationDelay:"".concat(.03*l,"s")},children:[e.label," (",null!==(i=Z[e.key])&&void 0!==i?i:0,")"]},e.key)})}),w&&(0,a.jsxs)("div",{className:"text-center py-8 text-white/50",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading tickets..."]}),k&&(0,a.jsx)("div",{className:"text-center py-8 text-red-400",children:k}),!w&&!k&&0===b.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-white/20 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-white/50",children:"No tickets found."})]}),(0,a.jsx)("div",{className:"space-y-2",children:b.map((t,s)=>{let l=new Date(t.created_at).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}),i="open"===t.status,r="claimed"===t.status&&t.claimed_by===(null==e?void 0:e.id);return(0,a.jsxs)("div",{className:"p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-all hover:scale-[1.01] animate-slideUp",style:{animationDelay:"".concat(.03*s,"s")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center ".concat(_(t.status).split(" ")[0]),children:M(t.status)}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-white",children:["Ticket #",t.id]}),(0,a.jsxs)("div",{className:"text-xs text-white/50",children:[t.claimed_by_username?"Claimed by ".concat(t.claimed_by_username):"Unclaimed"," â€¢ ",l]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full border ".concat(_(t.status)),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})})]}),(i||r)&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-white/10 flex gap-2",children:[i&&(0,a.jsxs)("button",{onClick:()=>C(t.id),disabled:null!==g,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-blue-500/20 text-blue-300 hover:bg-blue-500/30 transition text-sm font-medium disabled:opacity-50",children:[g===t.id?(0,a.jsx)(u.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(c.Z,{className:"w-4 h-4"}),"Claim Ticket"]}),r&&(0,a.jsxs)("button",{onClick:()=>S(t.id),disabled:null!==g,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-green-500/20 text-green-300 hover:bg-green-500/30 transition text-sm font-medium disabled:opacity-50",children:[g===t.id?(0,a.jsx)(u.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),"Resolve Ticket"]})]})]},t.id)})})]})]})}}},function(e){e.O(0,[464,304,621,971,117,744],function(){return e(e.s=444)}),_N_E=e.O()}]);