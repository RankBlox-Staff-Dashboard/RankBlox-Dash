(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[303],{5728:function(e,t,s){Promise.resolve().then(s.bind(s,2791))},2791:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(7437);function r(e){let{infraction:t}=e,s=new Date(t.created_at).toLocaleDateString();return(0,n.jsx)("div",{className:"bg-dark-card rounded-lg p-4 border ".concat(t.voided?"border-gray-600 opacity-60":"strike"===t.type?"border-red-500/50":"border-yellow-500/50"),children:(0,n.jsx)("div",{className:"flex items-start justify-between",children:(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsx)("span",{className:"text-lg",children:t.voided?"❌":"strike"===t.type?"⚠️":"ℹ️"}),(0,n.jsx)("h3",{className:"font-semibold text-white",children:"strike"===t.type?"Strike":"Warning"}),t.voided&&(0,n.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-600 text-gray-300",children:"Voided"})]}),(0,n.jsx)("p",{className:"text-gray-300 mb-2",children:t.reason}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,n.jsx)("span",{children:s}),t.issued_by_username&&(0,n.jsxs)("span",{children:["By ",t.issued_by_username]}),!t.issued_by_username&&(0,n.jsx)("span",{children:"By Activity System"})]})]})})})}var a=s(2265),i=s(8223);function c(){let{infractions:e,loading:t,error:s,refresh:c}=function(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[r,c]=(0,a.useState)(null),o=async()=>{try{n(!0),c(null);let e=await i.vD.getInfractions();t(e.data)}catch(t){var e,s;c((null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to fetch infractions")}finally{n(!1)}};return(0,a.useEffect)(()=>{o()},[]),{infractions:e,loading:s,error:r,refresh:o}}();return(0,n.jsxs)("div",{className:"flex-1 p-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Infractions"}),(0,n.jsx)("button",{onClick:c,className:"px-4 py-2 bg-dark-card border border-dark-border rounded text-white hover:bg-dark-border transition",children:"Refresh"})]}),t&&(0,n.jsx)("div",{className:"text-gray-400",children:"Loading infractions..."}),s&&(0,n.jsx)("div",{className:"text-red-400",children:s}),!t&&!s&&0===e.length&&(0,n.jsx)("div",{className:"text-gray-400",children:"No infractions found."}),(0,n.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,n.jsx)(r,{infraction:e},e.id))})]})}},8223:function(e,t,s){"use strict";s.d(t,{K5:function(){return d},Mh:function(){return c},au:function(){return l},bM:function(){return u},kv:function(){return i},vD:function(){return o}});var n=s(3464);let r=s(257).env.NEXT_PUBLIC_API_URL||"/api",a=n.Z.create({baseURL:r,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});let i={getMe:()=>a.get("/auth/me"),logout:()=>a.post("/auth/logout")},c={requestCode:()=>a.post("/verification/roblox/request"),verify:(e,t)=>a.post("/verification/roblox/verify",{roblox_username:e,emoji_code:t}),getStatus:()=>a.get("/verification/roblox/status")},o={getStats:()=>a.get("/dashboard/stats"),getInfractions:()=>a.get("/dashboard/infractions"),getAnalytics:()=>a.get("/dashboard/analytics")},l={list:e=>a.get("/tickets",{params:{status:e}}),claim:e=>a.post("/tickets/".concat(e,"/claim")),resolve:e=>a.post("/tickets/".concat(e,"/resolve"))},d={getPermissions:()=>a.get("/permissions"),checkPermission:e=>a.get("/permissions/check",{params:{permission:e}})},u={getUsers:()=>a.get("/management/users"),updateUserPermission:(e,t,s)=>a.put("/management/users/".concat(e,"/permissions"),{permission:t,granted:s}),updateUserStatus:(e,t)=>a.put("/management/users/".concat(e,"/status"),{status:t}),getTrackedChannels:()=>a.get("/management/tracked-channels"),addTrackedChannel:(e,t)=>a.post("/management/tracked-channels",{discord_channel_id:e,channel_name:t}),removeTrackedChannel:e=>a.delete("/management/tracked-channels/".concat(e))}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=5728)}),_N_E=e.O()}]);