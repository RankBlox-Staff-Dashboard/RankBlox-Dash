"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{4967:function(e,t,n){n.d(t,{k:function(){return m}});var s=n(7437),a=n(9376),r=n(5466),l=n(3247),i=n(6865),o=n(525),c=n(1804),d=n(8728),u=n(757),h=n(4457);let x=[{key:"overview",label:"Overview",icon:r.Z,path:"/overview"},{key:"lookup",label:"Lookup",icon:l.Z,path:"/tickets"},{key:"infractions",label:"Infractions",icon:i.Z,path:"/infractions"},{key:"analytics",label:"Analytics",icon:o.Z,path:"/analytics"},{key:"payouts",label:"Payouts",icon:c.Z,path:"/payouts"},{key:"settings",label:"Settings",icon:d.Z,path:"/settings"}];function m(){let e=(0,a.useRouter)(),t=(0,a.usePathname)();return(0,s.jsx)(u.Z,{className:"p-4",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(n=>{let a=n.path===t,r=n.icon;return(0,s.jsxs)("button",{type:"button",onClick:()=>e.push(n.path),className:(0,h.cn)("flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium transition",a?"bg-white text-black shadow-lg":"text-white/60 hover:bg-white/10 hover:text-white"),children:[(0,s.jsx)(r,{className:"h-4 w-4",strokeWidth:2}),(0,s.jsx)("span",{children:n.label})]},n.key)})})})}},7967:function(e,t,n){n.d(t,{P:function(){return h}});var s=n(7437),a=n(3145),r=n(3417),l=n(6865),i=n(3044),o=n(5805),c=n(1245),d=n(6992),u=n(757);function h(){var e,t,n,h,x;let{user:m}=(0,c.a)(),{stats:v}=(0,d.V)();if(!m)return null;let f=m.discord_avatar?"https://cdn.discordapp.com/avatars/".concat(m.discord_id,"/").concat(m.discord_avatar,".png?size=128"):"https://cdn.discordapp.com/embed/avatars/".concat(parseInt(m.discord_id.slice(-1))%5,".png");return(0,s.jsxs)(u.Z,{className:"p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-5",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(a.default,{src:f,alt:m.discord_username,width:56,height:56,className:"w-14 h-14 rounded-full ring-2 ring-white/20",unoptimized:!0}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-black"})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("h2",{className:"text-lg font-bold text-white truncate",children:["Welcome, Staff ",m.discord_username]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full ".concat((null==m?void 0:m.rank)?m.rank>=16&&m.rank<=255?"bg-red-600":m.rank>=8?"bg-purple-600":"bg-green-600":"bg-green-600"," text-white"),children:m.rank_name||"Staff"}),(0,s.jsx)("span",{className:"text-white/40",children:"â€¢"}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat("active"===m.status?"text-green-400":"text-yellow-400"),children:"active"===m.status?"Active":m.status||"Active"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-white/5",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-blue-500/20 ring-1 ring-blue-400/30",children:(0,s.jsx)(r.Z,{className:"w-5 h-5 text-blue-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-white/50 font-medium",children:"Messages"}),(0,s.jsxs)("div",{className:"text-base font-bold text-white",children:[null!==(e=null==v?void 0:v.messages_sent)&&void 0!==e?e:0,"/",null!==(t=null==v?void 0:v.messages_quota)&&void 0!==t?t:150]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-white/5",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-yellow-500/20 ring-1 ring-yellow-400/30",children:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-yellow-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-white/50 font-medium",children:"Infractions"}),(0,s.jsx)("div",{className:"text-base font-bold text-white",children:null!==(n=null==v?void 0:v.infractions)&&void 0!==n?n:0})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-white/5",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-emerald-500/20 ring-1 ring-emerald-400/30",children:(0,s.jsx)(i.Z,{className:"w-5 h-5 text-emerald-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-white/50 font-medium",children:"Claimed"}),(0,s.jsx)("div",{className:"text-base font-bold text-white",children:null!==(h=null==v?void 0:v.tickets_claimed)&&void 0!==h?h:0})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-white/5",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-purple-500/20 ring-1 ring-purple-400/30",children:(0,s.jsx)(o.Z,{className:"w-5 h-5 text-purple-300"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-white/50 font-medium",children:"Closed"}),(0,s.jsx)("div",{className:"text-base font-bold text-white",children:null!==(x=null==v?void 0:v.tickets_resolved)&&void 0!==x?x:0})]})]})]})]})}},757:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(7437),a=n(4457);function r(e){let{className:t,children:n}=e;return(0,s.jsx)("div",{className:(0,a.cn)("rounded-[26px] border border-white/10 bg-gradient-to-b from-white/[0.06] to-white/[0.02] shadow-[0_0_0_1px_rgba(255,255,255,0.04),0_24px_70px_rgba(0,0,0,0.78)]",t),children:n})}},1245:function(e,t,n){n.d(t,{AuthProvider:function(){return i},a:function(){return o}});var s=n(7437),a=n(2265),r=n(8223);let l=(0,a.createContext)(void 0);function i(e){var t;let{children:n}=e,[i,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),x=(0,a.useCallback)(()=>{localStorage.removeItem("token"),o(null),h(null)},[]),m=(0,a.useCallback)(e=>{localStorage.setItem("token",e)},[]),v=(0,a.useCallback)(async()=>{try{if(!localStorage.getItem("token"))return o(null),h(null),d(!1),null;let e=(await r.kv.getMe()).data;return o(e),e.verification?h(e.verification):h({discord:!!e.discord_id,roblox:!!e.roblox_id,active:"active"===e.status,rank:null!==e.rank,complete:"active"===e.status&&null!==e.roblox_id&&null!==e.rank,next_step:e.roblox_id?"active"!==e.status?"activation":null:"roblox"}),e}catch(n){var e,t;return console.error("Error fetching user:",n),((null===(e=n.response)||void 0===e?void 0:e.status)===401||(null===(t=n.response)||void 0===t?void 0:t.status)===403)&&x(),null}finally{d(!1)}},[x]);(0,a.useEffect)(()=>{v()},[v]);let f=null!==(t=null==u?void 0:u.complete)&&void 0!==t&&t;return(0,s.jsx)(l.Provider,{value:{user:i,loading:c,verification:u,isFullyVerified:f,refreshUser:v,updateToken:m,logout:x},children:n})}function o(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6992:function(e,t,n){n.d(t,{V:function(){return r}});var s=n(2265),a=n(8223);function r(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(!0),[l,i]=(0,s.useState)(null),o=async()=>{try{r(!0),i(null);let e=await a.vD.getStats();t(e.data)}catch(t){var e,n;i((null===(n=t.response)||void 0===n?void 0:null===(e=n.data)||void 0===e?void 0:e.error)||"Failed to fetch stats")}finally{r(!1)}};return(0,s.useEffect)(()=>{o();let e=setInterval(o,3e4);return()=>clearInterval(e)},[]),{stats:e,loading:n,error:l,refresh:o}}},4457:function(e,t,n){n.d(t,{cn:function(){return s}});function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}},8223:function(e,t,n){n.d(t,{Mh:function(){return c},au:function(){return u},bM:function(){return h},bR:function(){return r},kv:function(){return o},vD:function(){return d}});var s=n(3464);let a=n(257).env.NEXT_PUBLIC_API_URL||"https://staffapp-9q1t.onrender.com/api";function r(){return a.replace(/\/$/,"")}let l=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e});let i=!1;l.interceptors.response.use(e=>e,e=>{var t;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!i){let e=window.location.pathname;"/login"===e||e.startsWith("/auth/")||"/"===e||(i=!0,localStorage.removeItem("token"),window.location.replace("/login"),setTimeout(()=>{i=!1},2e3))}return Promise.reject(e)});let o={getMe:()=>l.get("/auth/me"),logout:()=>l.post("/auth/logout")},c={requestCode:()=>l.post("/verification/roblox/request"),verify:(e,t)=>l.post("/verification/roblox/verify",{roblox_username:e,emoji_code:t}),getStatus:()=>l.get("/verification/roblox/status")},d={getStats:()=>l.get("/dashboard/stats"),getInfractions:()=>l.get("/dashboard/infractions"),getAnalytics:()=>l.get("/dashboard/analytics")},u={list:e=>l.get("/tickets",{params:{status:e}}),claim:e=>l.post("/tickets/".concat(e,"/claim")),resolve:e=>l.post("/tickets/".concat(e,"/resolve"))},h={getUsers:()=>l.get("/management/users"),updateUserPermission:(e,t,n)=>l.put("/management/users/".concat(e,"/permissions"),{permission:t,granted:n}),updateUserStatus:(e,t)=>l.put("/management/users/".concat(e,"/status"),{status:t}),getTrackedChannels:()=>l.get("/management/tracked-channels"),addTrackedChannel:(e,t)=>l.post("/management/tracked-channels",{discord_channel_id:e,channel_name:t}),removeTrackedChannel:e=>l.delete("/management/tracked-channels/".concat(e))}}}]);